{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book a Cleaning - CleanFuture</title>
    <link rel="stylesheet" href="{% static 'css/booking.css' %}">
</head>
<body>
    <!-- Navigation -->
    <nav id="navbar">
        <div class="logo">Clean<span>Future</span></div>
        <div class="nav-links" id="navLinks">
            <a href="{% url 'home' %}">Home</a>
            <a href="{% url 'about' %}">About</a>
            <a href="{% url 'services' %}">Services</a>
            <a href="{% url 'contact' %}">Contact</a>
            <a href="{% url 'booking' %}" class="active">Book Now</a>
        </div>
        <div class="menu-toggle" id="menuToggle">â˜°</div>
    </nav>
    
    <!-- Page Header -->
    <header class="page-header">
        <h1 class="page-title">Book Your <span style="color: var(--primary);">Cleaning</span></h1>
        <p class="page-subtitle">Schedule your eco-friendly cleaning service quickly and easily. Customize your cleaning experience with just a few clicks.</p>
    </header>
    
    <!-- Booking Form -->
   <!-- booking.html -->
   <section class="booking-section">
    <div class="booking-container reveal">
        
        {% if messages %}
        <div class="message-container">
            {% for message in messages %}
                <div class="alert {% if message.tags == 'success' %}alert-success{% else %}alert-error{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <form id="bookingForm" action="{% url 'booking' %}" method="post" class="booking-form">

            {% csrf_token %}
            
            {% if form.errors %}
            <div class="form-errors">
                <p>Please correct the following errors:</p>
                <ul>
                    {% for field, errors in form.errors.items %}
                        {% for error in errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <div class="form-section">
                <h2 class="section-title">Service Details</h2>
                
                <div class="form-group">
                    {{ form.service_type.label_tag }}
                    {{ form.service_type }}
                </div>
                
                <div class="form-group">
                    {{ form.service_details.label_tag }}
                    {{ form.service_details }}
                </div>
                
                <div class="form-group">
                    {{ form.booking_date.label_tag }}
                    {{ form.booking_date }}
                </div>
                
                <div class="form-group">
                    {{ form.booking_time.label_tag }}
                    {{ form.booking_time }}
                </div>
            </div>
            
            <div class="form-section">
                <h2 class="section-title">Contact Information</h2>
                
                <div class="form-group">
                    {{ form.customer_name.label_tag }}
                    {{ form.customer_name }}
                </div>
                
                <div class="form-group">
                    {{ form.customer_email.label_tag }}
                    {{ form.customer_email }}
                </div>
                
                <div class="form-group">
                    {{ form.customer_phone.label_tag }}
                    {{ form.customer_phone }}
                </div>
            </div>
            
            <div class="form-section">
                <h2 class="section-title">Address Information</h2>
                
                <div class="form-group">
                    {{ form.address.label_tag }}
                    {{ form.address }}
                </div>
                
                <div class="form-group">
                    {{ form.city.label_tag }}
                    {{ form.city }}
                </div>
                
            </div>
            
            <div class="form-section">
                <h2 class="section-title">Additional Details</h2>
                <div class="form-group">
                    {{ form.special_instructions.label_tag }}
                    {{ form.special_instructions }}
                </div>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="cta-button">Schedule Cleaning</button>
                <button type="reset" class="secondary-button">Reset Form</button>
            </div>
        </form>
    </div>
</section>

    <!-- CTA Section -->
    <section class="cta">
        <div class="cta-content">
            <h2 class="section-title">Questions About Your Booking?</h2>
            <p class="cta-text">Our friendly customer support team is ready to help you customize your cleaning experience. Don't hesitate to reach out if you need assistance.</p>
            <div class="cta-buttons">
                <a href="{% url 'contact' %}" class="cta-button">Contact Support</a>
                <a href="tel:+1-888-CLEANFUTURE" class="secondary-button">Call Us</a>
            </div>
        </div>
    </section>
    
    <!-- Footer (same as services page) -->
    <footer>
        <!-- Footer content from services page -->
        <div class="footer-top">
            <div class="footer-column">
                <h4>CleanFuture</h4>
                <p>Revolutionizing the cleaning industry with eco-friendly solutions and cutting-edge technology to provide exceptional service quality.</p>
                <div class="social-links">
                    <a href="#" class="social-icon">f</a>
                    <a href="#" class="social-icon">t</a>
                    <a href="#" class="social-icon">in</a>
                    <a href="#" class="social-icon">ig</a>
                </div>
            </div>
            
            <div class="footer-column">
                <h4>Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="{% url 'home' %}">Home</a></li>
                    <li><a href="{% url 'about' %}">About Us</a></li>
                    <li><a href="{% url 'services' %}">Services</a></li>
                    <li><a href="{% url 'contact' %}">Contact</a></li>
                    <li><a href="{% url 'booking' %}">Book Now</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h4>Services</h4>
                <ul class="footer-links">
                    <li><a href="{% url 'services' %}#residential">Residential Cleaning</a></li>
                    <li><a href="{% url 'services' %}#commercial">Commercial Cleaning</a></li>
                    <li><a href="{% url 'services' %}#deep">Deep Cleaning</a></li>
                    <li><a href="{% url 'services' %}#eco">Eco-Friendly Cleaning</a></li>
                    <li><a href="{% url 'services' %}#specialized">Specialized Services</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; {% now "Y" %} CleanFuture. All rights reserved.</p>
        </div>
    </footer>
    
    <!-- JavaScript -->
    <script src="{% static 'js/main.js' %}">
       
document.getElementById('bookingForm').addEventListener('submit', async function(event) {
    event.preventDefault(); // Prevent page reload

    const form = event.target;
    const formData = new FormData(form);

    try {
        const response = await fetch(form.action, {
            method: 'POST',
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                'X-CSRFToken': formData.get('csrfmiddlewaretoken'),
            },
            body: formData
        });

        const data = await response.json();

        if (data.success) {
            form.reset(); // Clear form
            showPopup("Booking submitted successfully!");
        } else {
            showPopup("There was an error submitting your booking.");
        }
    } catch (error) {
        console.error('Error:', error);
        showPopup("Something went wrong. Please try again later.");
    }
});

function showPopup(message) {
    const popup = document.getElementById('popupMessage');
    const text = document.getElementById('popupText');
    text.innerText = message;
    popup.classList.remove('hidden');

    setTimeout(() => {
        popup.classList.add('hidden');
    }, 4000);
}
   </script>
   <div id="popupMessage" class="popup-message hidden">
    <p id="popupText"></p>
</div>

</body>
</html>